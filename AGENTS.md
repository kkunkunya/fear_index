\### 1. 核心原则与沟通 (Core Principles \& Communication)



\* \*\*最小改动\*\*: 优先在已有代码基础上进行修改，非绝对必要不新建文件。

\* \*\*计划先行\*\*: 在进行可能影响多处代码的大范围修改前，必须先阅读并理解相关代码，然后提出修改计划待我确认。

\* \*\*及时沟通\*\*: 在编程过程中若有任何疑问、或对需求不确定的地方，应立即停止并与我沟通。

\* \*\*版本控制\*\*: 我会负责处理所有版本控制（Git）操作，您只需专注于代码的实现与交付。



\### 2. 环境与依赖管理 (Environment \& Dependencies)



\* \*\*环境\*\*: 本项目使用 env 虚拟环境。

虚拟环境在: C:\Users\sxk27\OneDrive - MSFT\Project\fear_index\fear_index_env

\* \*\*依赖文件\*\*: 所有依赖项均通过 `requirements.txt` 文件进行统一管理。

\* \*\*新增依赖流程\*\*:

&nbsp;   1.  \*\*必须\*\*首先向我请求并获得许可。

&nbsp;   2.  安装成功后，\*\*必须\*\*确保 `requirements.txt` 文件得到同步更新。



\### 3. 编码与质量规范 (Coding \& Quality Standards)



\* \*\*注释 (Do)\*\*: 所有代码都必须添加清晰、易于理解的中文注释。

\* \*\*代码风格 (Do)\*\*: 所有 Python 代码在最终完成时，都必须使用 `black` 工具进行格式化，以确保遵循 PEP 8 风格。

\* \*\*命名约定 (Do's)\*\*:

&nbsp;   \* 函数及变量名: `\[待填写: 例如，使用 snake\_case, a\_variable\_name]`

&nbsp;   \* 类名: `\[待填写: 例如，使用 PascalCase, AClassName]`

&nbsp;   \* 常量名: `\[待填写: 例如，使用 ALL\_CAPS, A\_CONSTANT\_NAME]`



\### 4. 高效命令 (Efficient Commands)



为了实现快速反馈和迭代，每次完成修改后，请\*\*针对被修改的单个文件\*\*执行以下质量检查命令：



\* \*\*格式化代码\*\*:

&nbsp;   ```bash

&nbsp;   black path/to/your/modified\_file.py

&nbsp;   ```

\* \*\*单元测试\*\* (如果该文件有对应的测试):

&nbsp;   ```bash

&nbsp;   pytest path/to/your/test\_file.py

&nbsp;   ```



\### 5. 项目结构指引 (Project Structure Guide)







\### 6. mcp调用规范 (mcp Usage Policy)



\#### 6.1. 通用原则

\* \*\*调用时机\*\*: 优先依赖上下文，仅在内部知识不足时调用。\*\*默认不主动调用 `Context7`\*\*。

\* \*\*核心策略\*\*: 严格遵循“\*\*单轮单工具\*\*”与“\*\*最小必要\*\*”原则（精简查询、减少返回结果）。



\#### 6.2. Context7 (技术文档知识聚合)

\* \*\*触发\*\*: 查询官方技术文档（SDK/API/框架）。

\* \*\*流程\*\*: `resolve-library-id` -> `get-library-docs`。查询需聚焦 (`topic`) 并主动减少 `tokens`。

\* \*\*输出\*\*: \*\*答案精炼 + 引用出处/版本\*\*。禁止原文大段复制。

\* \*\*回退\*\*: 调用失败时，请求澄清或给出不确定的保守答案。



\#### 6.3. open-websearch (Web 搜索)

\* \*\*触发\*\*: 获取最新信息、查找官方链接。

\* \*\*查询\*\*: 使用精准关键词+限定词 (`site:`, `filetype:`)。

\* \*\*结果\*\*: \*\*必须过滤\*\*内容农场和无效站点。

\* \*\*输出\*\*: `标题` + `简述` + `URL`。

\* \*\*回退\*\*: 调用失败时，优化关键词重试或请求用户帮助。



\### 7. 功能测试流程 (Functional Testing Flow)



\* \*\*时机\*\*: 每完成一项相对独立的功能或模块后，都需要调用进行完整的功能测试。

\* \*\*清理\*\*: 测试完成后，所有用于该次测试的临时程序、文件或数据\*\*必须主动删除\*\*，保持工作区整洁。

